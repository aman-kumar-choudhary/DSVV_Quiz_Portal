<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Login - DSVV Quiz System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      body {
        font-family: "Poppins", sans-serif;
        background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
      }
      .card-hover {
        transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
      }
      .card-hover:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px -5px rgba(0, 0, 0, 0.15);
      }
      .input-focus:focus {
        border-color: #2563eb;
        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.15);
      }
      .gradient-text {
        background: linear-gradient(90deg, #1e40af 0%, #1e3a8a 100%);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
      }
      .glow-on-hover {
        transition: box-shadow 0.3s ease;
      }
      .glow-on-hover:hover {
        box-shadow: 0 0 15px rgba(37, 99, 235, 0.3);
      }
      select {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        background-image: none;
      }
      .role-option {
        padding: 12px;
        border-radius: 8px;
        margin-bottom: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 2px solid transparent;
      }
      .role-option:hover {
        background-color: #f1f5f9;
      }
      .role-option.selected {
        border-color: #2563eb;
        background-color: #dbeafe;
      }
      .role-icon {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 12px;
      }
      .admin-role {
        background: linear-gradient(135deg, #ef4444, #dc2626);
      }
      .faculty-role {
        background: linear-gradient(135deg, #3b82f6, #2563eb);
      }
      .coordinator-role {
        background: linear-gradient(135deg, #10b981, #059669);
      }
    </style>
  </head>
  <body class="min-h-screen flex items-center justify-center p-4 bg-gray-50">
    <div class="w-full max-w-md animate__animated animate__fadeIn">
      <!-- DSVV Logo Header -->
      <div class="flex flex-col items-center mb-8">
        <div class="flex items-center mb-2">
          <span class="text-3xl font-bold gradient-text">Quiz Portal</span>
        </div>
        <p class="text-gray-500 text-sm">Department of Computer Science</p>
      </div>

      <!-- Login Card -->
      <div class="bg-white rounded-2xl shadow-lg overflow-hidden card-hover">
        <!-- Card Header with Gradient -->
        <div
          class="bg-gradient-to-r from-blue-800 to-blue-900 py-5 px-6 text-center"
        >
          <h1 class="text-2xl font-bold text-white">Admin Portal</h1>
          <p class="text-blue-100 text-sm mt-1 opacity-90">
            Select your role and sign in
          </p>
        </div>

        <!-- Card Body -->
        <div class="p-6 sm:p-8">
          {% if error %}
          <div
            class="mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-lg flex items-start"
          >
            <svg
              class="h-5 w-5 text-red-500 mt-0.5 flex-shrink-0"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                clip-rule="evenodd"
              />
            </svg>
            <div class="ml-3">
              <p class="text-sm text-red-700">{{ error }}</p>
            </div>
          </div>
          {% endif %}

          <form method="POST" action="/admin-login" class="space-y-6">
            <!-- Role Selection -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-3"
                >Select Your Role</label
              >

              <!-- Admin Role -->
              <div
                class="role-option"
                data-role="admin"
                onclick="selectRole('admin')"
              >
                <div class="flex items-center">
                  <div class="role-icon admin-role">
                    <i class="fas fa-crown text-white"></i>
                  </div>
                  <div>
                    <div class="font-semibold text-gray-800">Administrator</div>
                    <div class="text-sm text-gray-600">
                      Full system access with user management
                    </div>
                    <div class="text-xs text-gray-500 mt-1">
                      Permissions: Create, Read, Update, Delete, Manage Users
                    </div>
                  </div>
                </div>
              </div>

              <!-- Faculty Role -->
              <div
                class="role-option"
                data-role="faculty"
                onclick="selectRole('faculty')"
              >
                <div class="flex items-center">
                  <div class="role-icon faculty-role">
                    <i class="fas fa-chalkboard-teacher text-white"></i>
                  </div>
                  <div>
                    <div class="font-semibold text-gray-800">Faculty</div>
                    <div class="text-sm text-gray-600">
                      Content management access
                    </div>
                    <div class="text-xs text-gray-500 mt-1">
                      Permissions: Create, Read, Update
                    </div>
                  </div>
                </div>
              </div>

              <!-- Coordinator Role -->
              <div
                class="role-option"
                data-role="coordinator"
                onclick="selectRole('coordinator')"
              >
                <div class="flex items-center">
                  <div class="role-icon coordinator-role">
                    <i class="fas fa-user-tie text-white"></i>
                  </div>
                  <div>
                    <div class="font-semibold text-gray-800">Coordinator</div>
                    <div class="text-sm text-gray-600">
                      View and create content
                    </div>
                    <div class="text-xs text-gray-500 mt-1">
                      Permissions: Create, Read
                    </div>
                  </div>
                </div>
              </div>

              <input type="hidden" name="role" id="selected-role" required />
            </div>

            <!-- Username -->
            <div>
              <label
                for="identifier"
                class="block text-sm font-medium text-gray-700 mb-2"
                >Username</label
              >
              <div class="mt-1 relative">
                <input
                  type="text"
                  id="identifier"
                  name="identifier"
                  required
                  class="input-focus block w-full px-4 py-2.5 border border-gray-200 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 placeholder-gray-400"
                  placeholder="Enter your username"
                />
                <div
                  class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"
                >
                  <i class="fas fa-user text-gray-400"></i>
                </div>
              </div>
            </div>

            <!-- Password -->
            <div>
              <label
                for="password"
                class="block text-sm font-medium text-gray-700 mb-2"
                >Password</label
              >
              <div class="mt-1 relative">
                <input
                  type="password"
                  id="password"
                  name="password"
                  required
                  class="input-focus block w-full px-4 py-2.5 border border-gray-200 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 placeholder-gray-400"
                  placeholder="••••••••"
                />
                <div
                  class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"
                >
                  <i class="fas fa-lock text-gray-400"></i>
                </div>
              </div>
              <div class="mt-2 text-right">
                <a
                  href="/forgot-password"
                  class="text-sm font-medium text-blue-600 hover:text-blue-500 hover:underline transition-colors duration-200"
                >
                  Forgot password?
                </a>
              </div>
            </div>

            <!-- Submit Button -->
            <div>
              <button
                type="submit"
                class="w-full flex justify-center py-3 px-4 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-300 glow-on-hover"
              >
                Sign In
                <i class="fas fa-sign-in-alt ml-2"></i>
              </button>
            </div>
          </form>

          <!-- Divider -->
          <div class="relative my-6">
            <div class="absolute inset-0 flex items-center">
              <div class="w-full border-t border-gray-200"></div>
            </div>
            <div class="relative flex justify-center text-sm">
              <span class="px-2 bg-white text-gray-500">Student Portal</span>
            </div>
          </div>

          <!-- Student Login Link -->
          <div class="text-center">
            <a
              href="/login"
              class="w-full inline-flex justify-center py-2.5 px-4 border border-gray-200 rounded-xl shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200"
            >
              <i class="fas fa-graduation-cap mr-2"></i>Student Login
            </a>
          </div>
        </div>
      </div>

      <!-- Footer Note -->
      <div class="mt-8 text-center text-sm text-gray-500">
        <p>© 2024 Dev Sanskriti Vishwavidyalaya. All rights reserved.</p>
        <p class="mt-1">Role-Based Access Control System v3.0</p>
      </div>
    </div>

    <script>
      let selectedRole = "";

      function selectRole(role) {
        selectedRole = role;

        // Remove selected class from all options
        document.querySelectorAll(".role-option").forEach((option) => {
          option.classList.remove("selected");
        });

        // Add selected class to clicked option
        document
          .querySelector(`.role-option[data-role="${role}"]`)
          .classList.add("selected");

        // Update hidden input
        document.getElementById("selected-role").value = role;

        // Update placeholder based on role
        const usernameInput = document.getElementById("identifier");
        if (role === "admin") {
          usernameInput.placeholder = "Enter admin username";
        } else if (role === "faculty") {
          usernameInput.placeholder = "Enter faculty username";
        } else if (role === "coordinator") {
          usernameInput.placeholder = "Enter coordinator username";
        }
      }

      // Form validation
      document.querySelector("form").addEventListener("submit", function (e) {
        if (!selectedRole) {
          e.preventDefault();
          alert("Please select your role");
          return false;
        }
      });

      // Prevent back-forward cache
      window.onpageshow = function (event) {
        if (event.persisted) {
          window.location.reload();
        }
      };

      // Clear session storage on page unload
      window.onbeforeunload = function () {
        sessionStorage.removeItem("reload");
      };

      // Check if page was restored from bfcache
      if (performance.navigation.type === 2) {
        window.location.reload();
      }
    </script>
  </body>
</html>
